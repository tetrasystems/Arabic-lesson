<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Arabic Grammar Teacher - Lesson 13 Part 2</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    [dir="rtl"] {
      direction: rtl;
      text-align: right;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-indigo-100 via-blue-100 to-purple-100 min-h-screen p-6">
  <div class="max-w-4xl mx-auto">
    <div class="bg-white rounded-2xl shadow-2xl p-8">
      <div class="mb-6 pb-4 border-b-2 border-gray-200">
        <h1 class="text-3xl font-bold text-center text-indigo-900">
          Madina Arabic - Lesson 13 Part 2
        </h1>
        <p class="text-center text-gray-600 mt-2">Plurals & Transformations</p>
      </div>

      <div id="app"></div>
    </div>
  </div>

  <script>
    const lesson13 = {
      title: "Ø§Ù„Ø¯ÙÙ‘Ø±Ù’Ø³Ù Ø§Ù„Ø«ÙÙ‘Ø§Ù„ÙØ«Ù Ø¹ÙØ´ÙØ±Ù - Lesson 13 (Part 2)",
      subtitle: "Plural Forms (Ø§Ù„Ø¬ÙÙ…Ù’Ø¹)",

      sentences: [
        {
          arabic: "Ù‡ÙØ¤ÙÙ„Ø§ÙØ¡Ù Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙˆÙ†Ù",
          transliteration: "haa'ulaa'i muslimÅ«na",
          english: "These are Muslims (masculine)",
          transforms: {
            masc: "Ù…ÙØ³Ù’Ù„ÙÙ…ÙŒ (muslimun) - a Muslim (masc.)",
            fem: "Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ©ÙŒ (muslimatun) - a Muslim (fem.)",
            plurMasc: "Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙˆÙ†Ù (nom) / Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙŠÙ†Ù (acc/gen)",
            plurFem: "Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ§ØªÙŒ (muslimÄtun)",
            steps: [
              "Ù…ÙØ³Ù’Ù„ÙÙ…ÙŒ â†’ add Ø© â†’ Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ©ÙŒ (feminine)",
              "Ù…ÙØ³Ù’Ù„ÙÙ…ÙŒ â†’ add ÙÙˆÙ†Ù â†’ Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙˆÙ†Ù (masc. plural)",
              "Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ©ÙŒ â†’ remove Ø©, add ÙØ§ØªÙŒ â†’ Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ§ØªÙŒ (fem. plural)"
            ]
          },
          analysis: {
            type: "Ø¬ÙÙ…Ù’Ù„ÙØ©ÙŒ Ø¥ÙØ³Ù’Ù…ÙÙŠÙÙ‘Ø©ÙŒ (Nominal Sentence)",
            parts: [
              "Ù‡ÙØ¤ÙÙ„Ø§ÙØ¡Ù - Mubtada (Subject) - Plural Demonstrative",
              "Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙˆÙ†Ù - Khabar (Predicate) - Sound Masc. Plural (Nominative: Ù€ÙÙˆÙ†Ù)"
            ],
            rules: [
              "Ù‡ÙØ¤ÙÙ„Ø§ÙØ¡Ù is used for ALL plurals (masc. and fem.)",
              "Sound Masc. Plural: Ù€ÙÙˆÙ†Ù (nom), Ù€ÙÙŠÙ†Ù (acc/gen)",
              "Drop Ù† when word is mudaaf"
            ]
          }
        },
        {
          arabic: "Ù‡ÙØ¤ÙÙ„Ø§ÙØ¡Ù Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ§ØªÙŒ",
          transliteration: "haa'ulaa'i muslimÄtun",
          english: "These are Muslim women",
          transforms: {
            masc: "Ù…ÙØ³Ù’Ù„ÙÙ…ÙŒ (muslimun)",
            fem: "Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ©ÙŒ (muslimatun)",
            plurFem: "Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ§ØªÙŒ (muslimÄtun)",
            steps: [
              "Ù…ÙØ³Ù’Ù„ÙÙ…ÙŒ â†’ add Ø© â†’ Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ©ÙŒ",
              "Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ©ÙŒ â†’ remove Ø© â†’ Ù…ÙØ³Ù’Ù„ÙÙ…Ù",
              "Ù…ÙØ³Ù’Ù„ÙÙ…Ù â†’ add ÙØ§ØªÙŒ â†’ Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ§ØªÙŒ"
            ]
          },
          analysis: {
            type: "Ø¬ÙÙ…Ù’Ù„ÙØ©ÙŒ Ø¥ÙØ³Ù’Ù…ÙÙŠÙÙ‘Ø©ÙŒ (Nominal Sentence)",
            parts: [
              "Ù‡ÙØ¤ÙÙ„Ø§ÙØ¡Ù - Mubtada - Plural Demonstrative",
              "Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ§ØªÙŒ - Khabar - Sound Fem. Plural (takes normal tanween)"
            ],
            rules: [
              "Sound Fem. Plural: remove Ø©, add Ù€ÙØ§ØªÙŒ",
              "Takes regular case endings unlike masculine plural",
              "Pattern: Ù€ÙØ§ØªÙŒ (nom), Ù€ÙØ§ØªÙ (acc), Ù€ÙØ§ØªÙ (gen)"
            ]
          }
        },
        {
          arabic: "Ø£ÙÙˆÙ„ÙÙ€Ù°Ø¦ÙÙƒÙ Ø·ÙÙ„Ø§ÙÙ‘Ø¨ÙŒ Ø¬ÙØ¯ÙØ¯ÙŒ",
          transliteration: "ulaa'ika tullÄbun jududun",
          english: "Those are new students",
          transforms: {
            masc: "Ø·ÙØ§Ù„ÙØ¨ÙŒ (taalibun) - student",
            fem: "Ø·ÙØ§Ù„ÙØ¨ÙØ©ÙŒ (taalibatun)",
            plurMasc: "Ø·ÙÙ„Ø§ÙÙ‘Ø¨ÙŒ (tullÄbun) - broken plural",
            plurFem: "Ø·ÙØ§Ù„ÙØ¨ÙØ§ØªÙŒ (taalibÄtun) - sound plural",
            adjMasc: "Ø¬ÙØ¯ÙÙŠØ¯ÙŒ (jadÄ«dun) - new",
            adjPlur: "Ø¬ÙØ¯ÙØ¯ÙŒ (jududun) - new (plural)",
            steps: [
              "Ø·ÙØ§Ù„ÙØ¨ÙŒ (ÙÙØ§Ø¹ÙÙ„ pattern) â†’ Ø·ÙÙ„Ø§ÙÙ‘Ø¨ÙŒ (ÙÙØ¹ÙÙ‘Ø§Ù„ pattern)",
              "Ø¬ÙØ¯ÙÙŠØ¯ÙŒ (ÙÙØ¹ÙÙŠÙ„) â†’ Ø¬ÙØ¯ÙØ¯ÙŒ (ÙÙØ¹ÙÙ„) broken plural"
            ]
          },
          analysis: {
            type: "Ø¬ÙÙ…Ù’Ù„ÙØ©ÙŒ Ø¥ÙØ³Ù’Ù…ÙÙŠÙÙ‘Ø©ÙŒ (Nominal Sentence)",
            parts: [
              "Ø£ÙÙˆÙ„ÙÙ€Ù°Ø¦ÙÙƒÙ - Mubtada - Distant Plural Demonstrative",
              "Ø·ÙÙ„Ø§ÙÙ‘Ø¨ÙŒ - Khabar and Mawsoof - Broken Plural",
              "Ø¬ÙØ¯ÙØ¯ÙŒ - Sifa (Adjective) - Broken Plural"
            ],
            rules: [
              "Broken plurals change internal vowel pattern",
              "Take normal tanween like singular nouns",
              "Adjectives must match in case and definiteness"
            ]
          }
        },
        {
          arabic: "Ø§Ù„Ø·ÙÙ‘Ù„Ø§ÙÙ‘Ø¨Ù ÙÙÙŠ Ø§Ù„ÙÙØµÙ’Ù„Ù",
          transliteration: "at-tullÄbu fi al-fasli",
          english: "The students are in the classroom",
          transforms: {
            singIndef: "Ø·ÙØ§Ù„ÙØ¨ÙŒ (a student)",
            singDef: "Ø§Ù„Ø·ÙÙ‘Ø§Ù„ÙØ¨Ù (the student)",
            plurIndef: "Ø·ÙÙ„Ø§ÙÙ‘Ø¨ÙŒ (students)",
            plurDef: "Ø§Ù„Ø·ÙÙ‘Ù„Ø§ÙÙ‘Ø¨Ù (the students)",
            steps: [
              "Ø·ÙØ§Ù„ÙØ¨ÙŒ (indef.) â†’ add Ø§Ù„ â†’ Ø§Ù„Ø·ÙÙ‘Ø§Ù„ÙØ¨Ù (definite)",
              "Ø·ÙÙ„Ø§ÙÙ‘Ø¨ÙŒ (pl. indef.) â†’ add Ø§Ù„ â†’ Ø§Ù„Ø·ÙÙ‘Ù„Ø§ÙÙ‘Ø¨Ù (pl. def.)",
              "With Ø§Ù„: no tanween, just single vowel"
            ]
          },
          analysis: {
            type: "Ø¬ÙÙ…Ù’Ù„ÙØ©ÙŒ Ø¥ÙØ³Ù’Ù…ÙÙŠÙÙ‘Ø©ÙŒ (Nominal Sentence)",
            parts: [
              "Ø§Ù„Ø·ÙÙ‘Ù„Ø§ÙÙ‘Ø¨Ù - Mubtada - Marfoo' (Ù€Ù) NO tanween",
              "ÙÙÙŠ - Preposition (in)",
              "Ø§Ù„ÙÙØµÙ’Ù„Ù - Majroor (Genitive Ù€Ù) - The whole phrase is Khabar"
            ],
            rules: [
              "Definite nouns: no tanween, single vowel",
              "Preposition causes following noun to be majroor",
              "Prepositional phrase acts as khabar (Dharf Makaan)"
            ]
          }
        },
        {
          arabic: "Ù‡ÙÙ…Ù’ Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙˆÙ†Ù ÙƒÙØ¨ÙØ§Ø±ÙŒ",
          transliteration: "hum mu'allimÅ«na kibÄrun",
          english: "They are senior teachers",
          transforms: {
            masc: "Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙŒ (mu'allimun) - teacher",
            fem: "Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙØ©ÙŒ (mu'allimatun)",
            plurMasc: "Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙˆÙ†Ù (nom) / Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙŠÙ†Ù (acc/gen)",
            adjMasc: "ÙƒÙØ¨ÙÙŠØ±ÙŒ (kabÄ«run) - big/senior",
            adjPlur: "ÙƒÙØ¨ÙØ§Ø±ÙŒ (kibÄrun) - big (plural)",
            steps: [
              "Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙŒ (Ù…ÙÙÙØ¹ÙÙ‘Ù„) â†’ add ÙÙˆÙ†Ù â†’ Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙˆÙ†Ù",
              "ÙƒÙØ¨ÙÙŠØ±ÙŒ (ÙÙØ¹ÙÙŠÙ„) â†’ ÙƒÙØ¨ÙØ§Ø±ÙŒ (ÙÙØ¹ÙØ§Ù„) broken plural"
            ]
          },
          analysis: {
            type: "Ø¬ÙÙ…Ù’Ù„ÙØ©ÙŒ Ø¥ÙØ³Ù’Ù…ÙÙŠÙÙ‘Ø©ÙŒ (Nominal Sentence)",
            parts: [
              "Ù‡ÙÙ…Ù’ - Mubtada - Pronoun (They - masc. plural)",
              "Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙˆÙ†Ù - Khabar and Mawsoof - Sound Masc. Plural (Ù€ÙÙˆÙ†Ù)",
              "ÙƒÙØ¨ÙØ§Ø±ÙŒ - Sifa (Adjective) - Broken Plural"
            ],
            rules: [
              "Pronouns can be mubtada",
              "Sound and broken plurals can coexist",
              "Adjective matches noun in case and number"
            ]
          }
        },
        {
          arabic: "Ø±ÙØ£ÙÙŠÙ’ØªÙ Ø§Ù„Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙŠÙ†Ù ÙÙÙŠ Ø§Ù„Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©Ù",
          transliteration: "ra'aytu al-mu'allimÄ«na fi al-madrasati",
          english: "I saw the teachers in the school",
          transforms: {
            singNom: "Ø§Ù„Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…Ù (nom)",
            singAcc: "Ø§Ù„Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…Ù (acc)",
            plurNom: "Ø§Ù„Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙˆÙ†Ù (nom: Ù€ÙÙˆÙ†Ù)",
            plurAcc: "Ø§Ù„Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙŠÙ†Ù (acc/gen: Ù€ÙÙŠÙ†Ù)",
            steps: [
              "Nominative: Ø§Ù„Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙˆÙ†Ù (Ù€ÙÙˆÙ†Ù)",
              "Accusative: Ø§Ù„Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙŠÙ†Ù (Ù€ÙÙŠÙ†Ù)",
              "KEY: Ù€ÙÙˆÙ†Ù changes to Ù€ÙÙŠÙ†Ù in acc/gen!"
            ]
          },
          analysis: {
            type: "Ø¬ÙÙ…Ù’Ù„ÙØ©ÙŒ ÙÙØ¹Ù’Ù„ÙÙŠÙÙ‘Ø©ÙŒ (VERBAL Sentence)",
            parts: [
              "Ø±ÙØ£ÙÙŠÙ’ØªÙ - Verb (I saw) + Subject (ØªÙ = I)",
              "Ø§Ù„Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙŠÙ†Ù - Maf'ool bihi (Direct Object) - ACCUSATIVE (Ù€ÙÙŠÙ†Ù)",
              "ÙÙÙŠ Ø§Ù„Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©Ù - Prepositional phrase (in the school)"
            ],
            rules: [
              "VERBAL sentence (starts with verb)",
              "Direct object is ALWAYS accusative",
              "Sound Masc. Plural: Ù€ÙÙˆÙ†Ù (nom) â†’ Ù€ÙÙŠÙ†Ù (acc/gen)"
            ]
          }
        },
        {
          arabic: "ÙƒÙØªÙØ¨Ù Ø§Ù„Ø·ÙÙ‘Ù„Ø§ÙÙ‘Ø¨Ù Ø¬ÙØ¯ÙÙŠØ¯ÙØ©ÙŒ",
          transliteration: "kutubu at-tullÄbi jadÄ«datun",
          english: "The students' books are new",
          transforms: {
            masc: "ÙƒÙØªÙØ§Ø¨ÙŒ (kitÄbun) - a book",
            plur: "ÙƒÙØªÙØ¨ÙŒ (kutubun) - books",
            adjMasc: "Ø¬ÙØ¯ÙÙŠØ¯ÙŒ (new - masc.)",
            adjFem: "Ø¬ÙØ¯ÙÙŠØ¯ÙØ©ÙŒ (new - fem.)",
            adjPlur: "Ø¬ÙØ¯ÙØ¯ÙŒ (new - plural)",
            steps: [
              "ÙƒÙØªÙØ§Ø¨ÙŒ (ÙÙØ¹ÙØ§Ù„) â†’ ÙƒÙØªÙØ¨ÙŒ (ÙÙØ¹ÙÙ„) broken plural",
              "NON-INTELLIGENT plural â†’ FEMININE SINGULAR!",
              "So: ÙƒÙØªÙØ¨ÙŒ takes Ø¬ÙØ¯ÙÙŠØ¯ÙØ©ÙŒ (fem. sg) NOT Ø¬ÙØ¯ÙØ¯ÙŒ!"
            ]
          },
          analysis: {
            type: "Ø¬ÙÙ…Ù’Ù„ÙØ©ÙŒ Ø¥ÙØ³Ù’Ù…ÙÙŠÙÙ‘Ø©ÙŒ (Nominal Sentence)",
            parts: [
              "ÙƒÙØªÙØ¨Ù - Mubtada and Mudaaf - Marfoo' (NO tanween)",
              "Ø§Ù„Ø·ÙÙ‘Ù„Ø§ÙÙ‘Ø¨Ù - Mudaaf Ilayhi - Majroor (Ù€Ù)",
              "Ø¬ÙØ¯ÙÙŠØ¯ÙØ©ÙŒ - Khabar - FEMININE SINGULAR!"
            ],
            rules: [
              "NON-INTELLIGENT broken plurals = FEMININE SINGULAR",
              "ÙƒÙØªÙØ¨ (books) takes Ø¬ÙØ¯ÙÙŠØ¯ÙØ©ÙŒ NOT Ø¬ÙØ¯ÙÙŠØ¯ or Ø¬ÙØ¯ÙØ¯",
              "This is a fundamental Arabic rule!"
            ]
          }
        }
      ],

      quiz: [
        {
          question: "What is the plural nominative form of Ù…ÙØ³Ù’Ù„ÙÙ…?",
          options: ["Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙŠÙ†Ù", "Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙˆÙ†Ù", "Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ§ØªÙŒ", "Ù…ÙØ³Ù’Ù„ÙÙ…ÙŒ"],
          correct: 1,
          explanation: "Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙˆÙ†Ù is the nominative form. Sound masculine plural: Ù€ÙÙˆÙ†Ù (nom)."
        },
        {
          question: "How do you form feminine plural of Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ©?",
          options: ["Add ÙÙˆÙ†Ù", "Remove Ø©, add ÙØ§ØªÙŒ", "Change to Ù…ÙØ³Ù’Ù„ÙÙ…ÙÙŠÙ†Ù", "Keep same"],
          correct: 1,
          explanation: "Remove Ø© and add Ù€ÙØ§ØªÙŒ. Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ©ÙŒ â†’ Ù…ÙØ³Ù’Ù„ÙÙ…ÙØ§ØªÙŒ (sound feminine plural)."
        },
        {
          question: "In accusative, what does Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙˆÙ†Ù become?",
          options: ["Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙˆÙ†Ù", "Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙŠÙ†Ù", "Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙØ§ØªÙŒ", "Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙŒ"],
          correct: 1,
          explanation: "Ù…ÙØ¹ÙÙ„ÙÙ‘Ù…ÙÙŠÙ†Ù. Sound masculine plural in acc/gen: Ù€ÙÙˆÙ†Ù â†’ Ù€ÙÙŠÙ†Ù."
        },
        {
          question: "What is the broken plural of ÙƒÙØªÙØ§Ø¨?",
          options: ["ÙƒÙØªÙØ§Ø¨ÙÙˆÙ†Ù", "ÙƒÙØªÙØ§Ø¨ÙØ§ØªÙŒ", "ÙƒÙØªÙØ¨ÙŒ", "ÙƒÙØªÙØ§Ø¨ÙŒ"],
          correct: 2,
          explanation: "ÙƒÙØªÙØ¨ÙŒ is the broken plural. Pattern: ÙƒÙØªÙØ§Ø¨ (ÙÙØ¹ÙØ§Ù„) â†’ ÙƒÙØªÙØ¨ (ÙÙØ¹ÙÙ„)."
        },
        {
          question: "Which adjective for ÙƒÙØªÙØ¨ÙŒ (books)?",
          options: ["Ø¬ÙØ¯ÙÙŠØ¯ÙŒ (masc. sg)", "Ø¬ÙØ¯ÙÙŠØ¯ÙØ©ÙŒ (fem. sg)", "Ø¬ÙØ¯ÙØ¯ÙŒ (plural)", "All correct"],
          correct: 1,
          explanation: "Ø¬ÙØ¯ÙÙŠØ¯ÙØ©ÙŒ! Non-intelligent broken plurals = FEMININE SINGULAR."
        },
        {
          question: "Demonstrative for ALL plurals?",
          options: ["Ù‡ÙÙ€Ù°Ø°ÙØ§", "Ù‡ÙÙ€Ù°Ø°ÙÙ‡Ù", "Ù‡ÙØ¤ÙÙ„Ø§ÙØ¡Ù", "Ù‡ÙÙ…Ù’"],
          correct: 2,
          explanation: "Ù‡ÙØ¤ÙÙ„Ø§ÙØ¡Ù is used for both masculine and feminine plurals (near)."
        }
      ]
    };

    let state = {
      currentSection: 'intro',
      currentSentence: 0,
      showAnalysis: false,
      showTransforms: false,
      quizAnswers: {},
      showResults: false
    };

    function playAudio(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'ar-SA';
      utterance.rate = 0.65;
      speechSynthesis.speak(utterance);
    }

    function render() {
      const app = document.getElementById('app');
      
      if (state.currentSection === 'intro') {
        app.innerHTML = `
          <div class="space-y-6">
            <div class="text-center">
              <h1 class="text-4xl font-bold text-indigo-900 mb-2" dir="rtl">${lesson13.title}</h1>
              <h2 class="text-2xl text-gray-700 mb-4" dir="rtl">${lesson13.subtitle}</h2>
            </div>
            
            <div class="bg-gradient-to-r from-indigo-50 to-blue-50 p-6 rounded-lg border-2 border-indigo-200">
              <h3 class="text-xl font-bold text-indigo-900 mb-3">ğŸ“š Lesson 13 Part 2 Focus:</h3>
              <ul class="space-y-2 text-gray-700">
                <li>â€¢ Sound Masculine Plural (Ø¬ÙÙ…Ù’Ø¹Ù Ø§Ù„Ù…ÙØ°ÙÙƒÙÙ‘Ø±Ù Ø§Ù„Ø³ÙÙ‘Ø§Ù„ÙÙ…)</li>
                <li>â€¢ Sound Feminine Plural (Ø¬ÙÙ…Ù’Ø¹Ù Ø§Ù„Ù…ÙØ¤ÙÙ†ÙÙ‘Ø«Ù Ø§Ù„Ø³ÙÙ‘Ø§Ù„ÙÙ…)</li>
                <li>â€¢ Broken Plural (Ø¬ÙÙ…Ù’Ø¹Ù Ø§Ù„ØªÙÙ‘ÙƒÙ’Ø³ÙÙŠØ±)</li>
                <li>â€¢ Non-Intelligent Plural Rule</li>
                <li>â€¢ Word Transformations: Masc â†’ Fem â†’ Plural</li>
              </ul>
            </div>

            <button onclick="changeSection('lesson')" class="w-full bg-gradient-to-r from-indigo-600 to-blue-600 text-white py-4 px-6 rounded-lg font-bold text-lg hover:from-indigo-700 hover:to-blue-700">
              Begin Lesson â†’
            </button>
          </div>
        `;
      } else if (state.currentSection === 'lesson') {
        const sentence = lesson13.sentences[state.currentSentence];
        app.innerHTML = `
          <div class="space-y-6">
            <div class="bg-white p-6 rounded-lg border-2 border-indigo-200 shadow-lg">
              <div class="text-center mb-4">
                <span class="text-sm text-gray-500">Sentence ${state.currentSentence + 1} of ${lesson13.sentences.length}</span>
              </div>

              <div class="bg-gradient-to-r from-amber-50 to-yellow-50 p-8 rounded-lg mb-4">
                <p class="text-5xl mb-4 text-center" dir="rtl">${sentence.arabic}</p>
                <div class="flex justify-center">
                  <button onclick="playAudio('${sentence.arabic}')" class="bg-green-600 text-white px-6 py-3 rounded-full hover:bg-green-700 flex items-center gap-2">
                    ğŸ”Š Listen
                  </button>
                </div>
              </div>

              <p class="text-xl text-gray-600 italic mb-2 text-center">${sentence.transliteration}</p>
              <p class="text-2xl font-semibold text-green-700 mb-4 text-center">${sentence.english}</p>

              <div class="flex gap-2 mb-4">
                <button onclick="toggleTransforms()" class="flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-bold hover:bg-blue-700">
                  ${state.showTransforms ? 'Hide' : 'Show'} Transformations
                </button>
                <button onclick="toggleAnalysis()" class="flex-1 bg-purple-600 text-white py-3 px-6 rounded-lg font-bold hover:bg-purple-700">
                  ${state.showAnalysis ? 'Hide' : 'Show'} Analysis
                </button>
              </div>

              ${state.showTransforms ? `
                <div class="bg-blue-50 p-6 rounded-lg border-2 border-blue-200 mb-4">
                  <h3 class="font-bold text-blue-900 mb-3 text-xl">Word Transformations:</h3>
                  <div class="space-y-3">
                    ${Object.entries(sentence.transforms).map(([key, value]) => {
                      if (key === 'steps') {
                        return `<div class="bg-white p-4 rounded-lg">
                          <p class="font-bold text-blue-800 mb-2">Step-by-Step:</p>
                          ${value.map(step => `<p class="text-gray-700 mb-1" dir="rtl">â†’ ${step}</p>`).join('')}
                        </div>`;
                      }
                      return `<div class="bg-white p-3 rounded">
                        <p class="text-sm font-semibold text-blue-700">${key}:</p>
                        <p class="text-lg" dir="rtl">${value}</p>
                      </div>`;
                    }).join('')}
                  </div>
                </div>
              ` : ''}

              ${state.showAnalysis ? `
                <div class="bg-purple-50 p-6 rounded-lg border-2 border-purple-200 space-y-4">
                  <div class="bg-white p-4 rounded-lg">
                    <h3 class="font-bold text-purple-900 mb-2">Sentence Type:</h3>
                    <p class="text-gray-700" dir="rtl">${sentence.analysis.type}</p>
                  </div>

                  <div class="bg-white p-4 rounded-lg">
                    <h3 class="font-bold text-purple-900 mb-3">Components:</h3>
                    ${sentence.analysis.parts.map(part => `<p class="text-gray-700 mb-2">â€¢ ${part}</p>`).join('')}
                  </div>

                  <div class="bg-white p-4 rounded-lg">
                    <h3 class="font-bold text-purple-900 mb-2">Grammar Rules:</h3>
                    <ul class="space-y-2">
                      ${sentence.analysis.rules.map(rule => `
                        <li class="flex items-start">
                          <span class="text-purple-600 mr-2">âœ“</span>
                          <span class="text-gray-700">${rule}</span>
                        </li>
                      `).join('')}
                    </ul>
                  </div>
                </div>
              ` : ''}
            </div>

            <div class="flex justify-between">
              <button onclick="prevSentence()" ${state.currentSentence === 0 ? 'disabled' : ''} class="bg-gray-300 text-gray-700 py-2 px-6 rounded-lg font-bold hover:bg-gray-400 disabled:opacity-50">
                â† Previous
              </button>
              
              ${state.currentSentence < lesson13.sentences.length - 1 ? `
                <button onclick="nextSentence()" class="bg-indigo-600 text-white py-2 px-6 rounded-lg font-bold hover:bg-indigo-700">
                  Next â†’
                </button>
              ` : `
                <button onclick="changeSection('quiz')" class="bg-green-600 text-white py-2 px-6 rounded-lg font-bold hover:bg-green-700">
                  Quiz ğŸ†
                </button>
              `}
            </div>
          </div>
        `;
      } else if (state.currentSection === 'quiz') {
        const score = Object.entries(state.quizAnswers).filter(([qIdx, answer]) => 
          answer === lesson13.quiz[qIdx].correct
        ).length;

        app.innerHTML = `
          <div class="space-y-6">
            <div class="bg-white p-6 rounded-lg border-2 border-orange-200 shadow-lg">
              <h2 class="text-2xl font-bold text-orange-900 mb-4">ğŸ† Lesson 13 Part 2 Quiz</h2>

              ${lesson13.quiz.map((q, qIdx) => `
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                  <p class="font-semibold text-gray-800 mb-3">${qIdx + 1}. ${q.question}</p>
                  <div class="space-y-2">
                    ${q.options.map((option, oIdx) => `
                      <button onclick="answerQuestion(${qIdx}, ${oIdx})" 
                        ${state.showResults ? 'disabled' : ''}
                        class="w-full text-left p-3 rounded-lg border-2 transition-all ${
                          state.showResults
                            ? oIdx === q.correct
                              ? 'bg-green-100 border-green-500'
                              : state.quizAnswers[qIdx] === oIdx
                              ? 'bg-red-100 border-red-500'
                              : 'bg-white border-gray-200'
                            : state.quizAnswers[qIdx] === oIdx
                            ? 'bg-blue-100 border-blue-500'
                            : 'bg-white border-gray-200 hover:bg-gray-100'
                        }">
                        ${state.showResults && oIdx === q.correct ? 'âœ“ ' : ''}
                        ${state.showResults && state.quizAnswers[qIdx] === oIdx && oIdx !== q.correct ? 'âœ— ' : ''}
                        ${option}
                      </button>
                    `).join('')}
                  </div>
                  ${state.showResults ? `
                    <div class="mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200">
                      <p class="text-sm text-blue-900"><strong>Explanation:</strong> ${q.explanation}</p>
                    </div>
                  ` : ''}
                </div>
              `).join('')}

              ${!state.showResults ? `
                <button onclick="submitQuiz()" ${Object.keys(state.quizAnswers).length < lesson13.quiz.length ? 'disabled' : ''} 
                  class="w-full bg-orange-600 text-white py-3 px-6 rounded-lg font-bold hover:bg-orange-700 disabled:opacity-50">
                  Submit Quiz
                </button>
              ` : `
                <div class="text-center">
                  <div class="bg-gradient-to-r from-green-100 to-blue-100 p-6 rounded-lg border-2 border-green-300 mb-4">
                    <h3 class="text-2xl font-bold text-green-900 mb-2">
                      Score: ${score} / ${lesson13.quiz.length}
                    </h3>
                    <p class="text-lg text-gray-700">
                      ${score === lesson13.quiz.length ? 'ğŸ‰ Perfect!' : score >= 4 ? 'ğŸ‘ Great!' : 'ğŸ“š Keep practicing!'}
                    </p>
                  </div>
                  <button onclick="resetLesson()" class="bg-indigo-600 text-white py-3 px-6 rounded-lg font-bold hover:bg-indigo-700">
                    Review Lesson
                  </button>
                </div>
              `}
            </div>
          </div>
        `;
      }
    }

    function changeSection(section) {
      state.currentSection = section;
      render();
    }

    function nextSentence() {
      if (state.currentSentence < lesson13.sentences.length - 1) {
        state.currentSentence++;
        state.showAnalysis = false;
        state.showTransforms = false;
        render();
      }
    }

    function prevSentence() {
      if (state.currentSentence > 0) {
        state.currentSentence--;
        state.showAnalysis = false;
        state.showTransforms = false;
        render();
      }
    }

    function toggleAnalysis() {
      state.showAnalysis = !state.showAnalysis;
      render();
    }

    function toggleTransforms() {
      state.showTransforms = !state.showTransforms;
      render();
    }

    function answerQuestion(qIdx, oIdx) {
      if (!state.showResults) {
        state.quizAnswers[qIdx] = oIdx;
        render();
      }
    }

    function submitQuiz() {
      state.showResults = true;
      render();
    }

    function resetLesson() {
      state = {
        currentSection: 'intro',
        currentSentence: 0,
        showAnalysis: false,
        showTransforms: false,
        quizAnswers: {},
        showResults: false
      };
      render();
    }

    // Initial render
    render();
  </script>
</body>
</html>
